<html>

<link rel="import" href="./bower_components/map-search/map-search.html">

<head>

</head>

<body onload="loaded()">

<button type="button" onclick="run()">Click to generate more points</button><br>
Radius: <input type="number" name="radius" id="myRadius"
			onkeyup = "if (event.keyCode == 13)
				document.getElementById('radiusBtn').click()">	
<button type="button" id="radiusBtn" onclick="setRadius()">Radius!</button>

<map-search id="map_search"></map-search>



</body>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<script>

var imgSrc = "https://unsplash.it/100/";

function loaded(){
	setTimeout(function(){
		run();
	}, 500);

}


function run(){
	base = {lat: 50.0755, lng: 14.4378};
	objArr = [];
	generateObjects();
	document.querySelector("#map_search").newMarker(objArr);
}

function generateObjects(){
	for (i=0; i < 5; i++){
		var obj = {
			lat: (Math.random()/100+base.lat),
			lng: (Math.random()/100+base.lng),
		}
		obj.info = (generateInfo(obj.lat, obj.lng));
		objArr.push(obj);
	}
}

function generateInfo(lat, lng){
	var infoString = '<head>' + 
	'<style>' +
	'p { text-align: center}' +
	'img.displayed { display: block; margin-left: auto; margin-right: auto }' + 
	'</style>' +
	'</head>' +
	'<body>' +
	'<div id="content">' + 
	'<img class="displayed" src="' + imgSrc + '" alt="Splash Image">' +
	'<div id="bodyContent">' +
	'<p>Lat: ' + lat.toString().substring(0, 7) + '</p>' +
	'<p>Lng: ' + lng.toString().substring(0, 7) + '</p>' + 
	'</div>' +
	'</div>' +
	'</body>';
	return infoString;
}

function setRadius(){
	var radius = document.getElementById("myRadius").value;
	if(!radius)
		alert("Please enter a number!");
	else
		document.querySelector("#map_search").displayRadius = radius;
}

</script>


</html>